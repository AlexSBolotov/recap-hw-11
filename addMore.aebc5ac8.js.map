{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,0BAIA,MAAMC,EAAO,CACXC,OAAQC,SAASC,cAAc,gBAC/BC,UAAWF,SAASC,cAAc,YAClCE,eAAgBH,SAASC,cAAc,gBACvCG,cAAeJ,SAASC,cAAc,cAExC,IAAII,EACAC,EAAO,EAEX,MA4BMC,EAAiBC,MAAMC,IAC3BH,GAAQ,EACR,IACE,MAAMI,QAAa,EAAAd,EAAAe,SAAU,C,MAAEN,E,KAAOC,IAClCM,KAAKC,KAAKH,EAAKI,MAAQ,MAAQR,IACjCS,IACAC,EAAAC,OAAOC,KAAK,uBAEd,EAAAC,EAAAR,SAAeD,GACfU,G,CACA,MAAOC,GACPL,EAAAC,OAAOK,QAAQD,EAAME,Q,GAInBC,EAAa,KACjB,MAAMrB,eAAEA,EAAcC,cAAEA,GAAkBN,EAC1CK,EAAesB,UAAUC,OAAO,eAChCtB,EAAcuB,iBAAiB,QAASpB,EAAe,EAEnDQ,EAAa,KACjB,MAAMZ,eAAEA,EAAcC,cAAEA,GAAkBN,EAC1CK,EAAesB,UAAUG,IAAI,eAC7BxB,EAAcyB,oBAAoB,QAAStB,EAAe,EAEtDa,EAAe,KACftB,EAAKK,eAAesB,UAAUK,SAAS,gBAG3ChC,EAAKK,eAAe4B,eAAe,CAAEC,SAAU,UAAW,EAE5DlC,EAAKC,OAAO4B,iBAAiB,UA3DRnB,MAAMC,IACzBA,EAAEwB,iBACF3B,EAAO,EACPD,EAAQI,EAAEyB,cAAcC,SAASC,YAAYC,MAE7C,MAAMtC,OAAEA,EAAMG,UAAEA,EAASC,eAAEA,GAAmBL,EAC9CI,EAAUoC,UAAY,GACtBnC,EAAesB,UAAUG,IAAI,eAE7B,IACE,MAAMlB,QAAa,EAAAd,EAAAe,SAAU,C,MAAEN,E,KAAOC,IACtC,GAAyB,IAArBI,EAAK6B,KAAKC,OAIZ,YAHAxB,EAAAC,OAAOK,QACL,4EAIJN,EAAAC,OAAOwB,QAAQ,aAAa/B,EAAKI,kBAC7BJ,EAAKI,MAAQ,IACfU,KAEF,EAAAL,EAAAR,SAAeD,GACfX,EAAO2C,O,CACP,MAAOrB,GACPL,EAAAC,OAAOK,QAAQD,EAAME,Q","sources":["src/js/addMore.js"],"sourcesContent":["import fetchData from './api';\nimport onFetchSuccess from './common';\nimport { Notify } from 'notiflix';\n\nconst refs = {\n  formEl: document.querySelector('#search-form'),\n  galleryEl: document.querySelector('.gallery'),\n  addMoreWrapper: document.querySelector('.btn-wrapper'),\n  addMoreButton: document.querySelector('.add-more'),\n};\nlet query;\nlet page = 1;\n\nconst onFormSubmit = async e => {\n  e.preventDefault();\n  page = 1;\n  query = e.currentTarget.elements.searchQuery.value;\n\n  const { formEl, galleryEl, addMoreWrapper } = refs;\n  galleryEl.innerHTML = '';\n  addMoreWrapper.classList.add('not-visible');\n\n  try {\n    const data = await fetchData({ query, page });\n    if (data.hits.length === 0) {\n      Notify.failure(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n      return;\n    }\n    Notify.success(`There are ${data.total} results.`);\n    if (data.total > 40) {\n      showButton();\n    }\n    onFetchSuccess(data);\n    formEl.reset();\n  } catch (error) {\n    Notify.failure(error.message);\n  }\n};\n\nconst onAddMoreClick = async e => {\n  page += 1;\n  try {\n    const data = await fetchData({ query, page });\n    if (Math.ceil(data.total / 40) === page) {\n      hideButton();\n      Notify.info('End of collection');\n    }\n    onFetchSuccess(data);\n    smoothScroll();\n  } catch (error) {\n    Notify.failure(error.message);\n  }\n};\n\nconst showButton = () => {\n  const { addMoreWrapper, addMoreButton } = refs;\n  addMoreWrapper.classList.remove('not-visible');\n  addMoreButton.addEventListener('click', onAddMoreClick);\n};\nconst hideButton = () => {\n  const { addMoreWrapper, addMoreButton } = refs;\n  addMoreWrapper.classList.add('not-visible');\n  addMoreButton.removeEventListener('click', onAddMoreClick);\n};\nconst smoothScroll = () => {\n  if (refs.addMoreWrapper.classList.contains('not-visible')) {\n    return;\n  }\n  refs.addMoreWrapper.scrollIntoView({ behavior: 'smooth' });\n};\nrefs.formEl.addEventListener('submit', onFormSubmit);\n"],"names":["$7rYDH","parcelRequire","$61cdcb19fa03843b$var$refs","formEl","document","querySelector","galleryEl","addMoreWrapper","addMoreButton","$61cdcb19fa03843b$var$query","$61cdcb19fa03843b$var$page","$61cdcb19fa03843b$var$onAddMoreClick","async","e","data","default","Math","ceil","total","$61cdcb19fa03843b$var$hideButton","$1GAPJ","Notify","info","$7EEHk","$61cdcb19fa03843b$var$smoothScroll","error","failure","message","$61cdcb19fa03843b$var$showButton","classList","remove","addEventListener","add","removeEventListener","contains","scrollIntoView","behavior","preventDefault","currentTarget","elements","searchQuery","value","innerHTML","hits","length","success","reset"],"version":3,"file":"addMore.aebc5ac8.js.map"}