{"mappings":"iiBAAA,IAWIA,E,EAXJC,EAAAC,EAAA,S,oDAIMC,EAAO,CACXC,OAAQC,SAASC,cAAc,gBAC/BC,UAAWF,SAASC,cAAc,YAClCE,eAAgBH,SAASC,cAAc,gBACvCG,cAAeJ,SAASC,cAAc,cAIpCI,EAAO,EAELC,G,EAAeC,EAAAX,EAAA,CAAAW,EAAAC,GAAAC,MAAA,SAAAC,EAAMC,G,IAKjBZ,EAAQG,EAAWC,EAInBS,E,yEARRD,EAAEE,iBACFR,EAAO,EACPV,EAAQgB,EAAEG,cAAcC,SAASC,YAAYC,MAErClB,EAAsCD,EAAtCC,OAAQG,EAA8BJ,EAA9BI,UAAWC,EAAmBL,EAAnBK,eAC3BD,EAAUgB,UAAY,G,mBAGD,EAAAC,EAAAC,SAAU,CAAEC,MAAA1B,EAAO2B,KAAAjB,I,UACb,KADnBO,EAAIW,EAAAC,MACDC,KAAKC,OAAY,C,uBACxBC,EAAAC,OAAOC,QACL,4E,2BAIJF,EAAAC,OAAOE,QAAQ,aAAwBC,OAAXnB,EAAKoB,MAAM,eACvC,EAAAC,EAAAb,SAAeR,GACfsB,EAASC,QAAQhC,GACjBJ,EAAOqC,Q,kDAEPT,EAAAC,OAAOC,QAAQN,EAAAc,GAAMC,S,mEArBE3B,G,iCAyBrB4B,EAAO,W,MAAGhC,EAAAX,EAAA,CAAAW,EAAAC,GAAAC,MAAA,SAAAC,EAAMC,G,IAGZC,E,yEAFRP,GAAQ,E,mBAEa,EAAAc,EAAAC,SAAU,CAAEC,MAAA1B,EAAO2B,KAAAjB,I,OAAhCO,EAAIW,EAAAC,KACNgB,KAAKC,MAAM7B,EAAKoB,MAAQ,MAAQ3B,GAClCsB,EAAAC,OAAOc,KAAK,sBAEd,EAAAT,EAAAb,SAAeR,G,gDAEfe,EAAAC,OAAOC,QAAQN,EAAAc,GAAMC,S,yEATH3B,G,gCAAT,GAabb,EAAKC,OAAO4C,iBAAiB,SAAUrC,GAEvC,IAYI4B,EAAW,IAAIU,sBAZI,SAAAC,GACjBA,EAAQ,GAAGC,gBACbP,G,GAIU,CACZQ,KAAM,KACNC,WAAY,oBACZC,UAAW,G","sources":["src/js/scroll.js"],"sourcesContent":["import fetchData from './api';\nimport onFetchSuccess from './common';\nimport { Notify } from 'notiflix';\n\nconst refs = {\n  formEl: document.querySelector('#search-form'),\n  galleryEl: document.querySelector('.gallery'),\n  addMoreWrapper: document.querySelector('.btn-wrapper'),\n  addMoreButton: document.querySelector('.add-more'),\n};\n\nlet query;\nlet page = 1;\n\nconst onFormSubmit = async e => {\n  e.preventDefault();\n  page = 1;\n  query = e.currentTarget.elements.searchQuery.value;\n\n  const { formEl, galleryEl, addMoreWrapper } = refs;\n  galleryEl.innerHTML = '';\n\n  try {\n    const data = await fetchData({ query, page });\n    if (data.hits.length === 0) {\n      Notify.failure(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n      return;\n    }\n    Notify.success(`There are ${data.total} results.`);\n    onFetchSuccess(data);\n    observer.observe(addMoreWrapper);\n    formEl.reset();\n  } catch (error) {\n    Notify.failure(error.message);\n  }\n};\n\nconst addMore = async e => {\n  page += 1;\n  try {\n    const data = await fetchData({ query, page });\n    if (Math.floor(data.total / 40) === page) {\n      Notify.info('End of collection');\n    }\n    onFetchSuccess(data);\n  } catch (error) {\n    Notify.failure(error.message);\n  }\n};\n\nrefs.formEl.addEventListener('submit', onFormSubmit);\n\nconst loadMoreScroll = entries => {\n  if (entries[0].isIntersecting) {\n    addMore();\n  }\n};\n\nlet options = {\n  root: null,\n  rootMargin: '0px 0px 600px 0px',\n  threshold: 1.0,\n};\n\nlet observer = new IntersectionObserver(loadMoreScroll, options);\n"],"names":["$dd9e54e108f59881$var$query","$bpxeT","parcelRequire","$dd9e54e108f59881$var$refs","formEl","document","querySelector","galleryEl","addMoreWrapper","addMoreButton","$dd9e54e108f59881$var$page","$dd9e54e108f59881$var$onFormSubmit","$parcel$interopDefault","$2TvXO","mark","_callee","e","data","preventDefault","currentTarget","elements","searchQuery","value","innerHTML","$b7ONl","default","query","page","_ctx","sent","hits","length","$ejkSG","Notify","failure","success","concat","total","$fJh0j","$dd9e54e108f59881$var$observer","observe","reset","t0","message","$dd9e54e108f59881$var$addMore","Math","floor","info","addEventListener","IntersectionObserver","entries","isIntersecting","root","rootMargin","threshold"],"version":3,"file":"scroll.a0f145b4.js.map"}