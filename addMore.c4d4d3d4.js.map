{"mappings":"iiBAAA,IAUIA,E,EAVJC,EAAAC,EAAA,S,oDAIMC,EAAO,CACXC,OAAQC,SAASC,cAAc,gBAC/BC,UAAWF,SAASC,cAAc,YAClCE,eAAgBH,SAASC,cAAc,gBACvCG,cAAeJ,SAASC,cAAc,cAGpCI,EAAO,EAELC,G,EAAeC,EAAAX,EAAA,CAAAW,EAAAC,GAAAC,MAAA,SAAAC,EAAMC,G,IAKjBZ,EAAQG,EAAWC,EAKnBS,E,yEATRD,EAAEE,iBACFR,EAAO,EACPV,EAAQgB,EAAEG,cAAcC,SAASC,YAAYC,MAErClB,EAAsCD,EAAtCC,OAAQG,EAA8BJ,EAA9BI,UAAWC,EAAmBL,EAAnBK,eAC3BD,EAAUgB,UAAY,GACtBf,EAAegB,UAAUC,IAAI,e,mBAGR,EAAAC,EAAAC,SAAU,CAAEC,MAAA5B,EAAO6B,KAAAnB,I,UACb,KADnBO,EAAIa,EAAAC,MACDC,KAAKC,OAAY,C,uBACxBC,EAAAC,OAAOC,QACL,4E,2BAIJF,EAAAC,OAAOE,QAAQ,aAAwBC,OAAXrB,EAAKsB,MAAM,cACnCtB,EAAKsB,MAAQ,IACfC,KAEF,EAAAC,EAAAd,SAAeV,GACfb,EAAOsC,Q,kDAEPR,EAAAC,OAAOC,QAAQN,EAAAa,GAAMC,S,mEAxBE5B,G,iCA4BrB6B,EAAc,W,MAAGjC,EAAAX,EAAA,CAAAW,EAAAC,GAAAC,MAAA,SAAAC,EAAMC,G,IAGnBC,E,yEAFRP,GAAQ,E,mBAEa,EAAAgB,EAAAC,SAAU,CAAEC,MAAA5B,EAAO6B,KAAAnB,I,OAAhCO,EAAIa,EAAAC,KACNe,KAAKC,KAAK9B,EAAKsB,MAAQ,MAAQ7B,IACjCsC,IACAd,EAAAC,OAAOc,KAAK,uBAEd,EAAAR,EAAAd,SAAeV,GACfiC,I,kDAEAhB,EAAAC,OAAOC,QAAQN,EAAAa,GAAMC,S,0EAXI5B,G,gCAAT,GAedwB,EAAa,WACjB,IAAQhC,EAAkCL,EAAlCK,eAAgBC,EAAkBN,EAAlBM,cACxBD,EAAegB,UAAU2B,OAAO,eAChC1C,EAAc2C,iBAAiB,QAASP,E,EAEpCG,EAAa,WACjB,IAAQxC,EAAkCL,EAAlCK,eAAgBC,EAAkBN,EAAlBM,cACxBD,EAAegB,UAAUC,IAAI,eAC7BhB,EAAc4C,oBAAoB,QAASR,E,EAEvCK,EAAe,WACf/C,EAAKK,eAAegB,UAAU8B,SAAS,gBAG3CnD,EAAKK,eAAe+C,eAAe,CAAEC,SAAU,U,EAEjDrD,EAAKC,OAAOgD,iBAAiB,SAAUzC,E","sources":["src/js/addMore.js"],"sourcesContent":["import fetchData from './api';\nimport onFetchSuccess from './common';\nimport { Notify } from 'notiflix';\n\nconst refs = {\n  formEl: document.querySelector('#search-form'),\n  galleryEl: document.querySelector('.gallery'),\n  addMoreWrapper: document.querySelector('.btn-wrapper'),\n  addMoreButton: document.querySelector('.add-more'),\n};\nlet query;\nlet page = 1;\n\nconst onFormSubmit = async e => {\n  e.preventDefault();\n  page = 1;\n  query = e.currentTarget.elements.searchQuery.value;\n\n  const { formEl, galleryEl, addMoreWrapper } = refs;\n  galleryEl.innerHTML = '';\n  addMoreWrapper.classList.add('not-visible');\n\n  try {\n    const data = await fetchData({ query, page });\n    if (data.hits.length === 0) {\n      Notify.failure(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n      return;\n    }\n    Notify.success(`There are ${data.total} results.`);\n    if (data.total > 40) {\n      showButton();\n    }\n    onFetchSuccess(data);\n    formEl.reset();\n  } catch (error) {\n    Notify.failure(error.message);\n  }\n};\n\nconst onAddMoreClick = async e => {\n  page += 1;\n  try {\n    const data = await fetchData({ query, page });\n    if (Math.ceil(data.total / 40) === page) {\n      hideButton();\n      Notify.info('End of collection');\n    }\n    onFetchSuccess(data);\n    smoothScroll();\n  } catch (error) {\n    Notify.failure(error.message);\n  }\n};\n\nconst showButton = () => {\n  const { addMoreWrapper, addMoreButton } = refs;\n  addMoreWrapper.classList.remove('not-visible');\n  addMoreButton.addEventListener('click', onAddMoreClick);\n};\nconst hideButton = () => {\n  const { addMoreWrapper, addMoreButton } = refs;\n  addMoreWrapper.classList.add('not-visible');\n  addMoreButton.removeEventListener('click', onAddMoreClick);\n};\nconst smoothScroll = () => {\n  if (refs.addMoreWrapper.classList.contains('not-visible')) {\n    return;\n  }\n  refs.addMoreWrapper.scrollIntoView({ behavior: 'smooth' });\n};\nrefs.formEl.addEventListener('submit', onFormSubmit);\n"],"names":["$3ad807910716e42a$var$query","$bpxeT","parcelRequire","$3ad807910716e42a$var$refs","formEl","document","querySelector","galleryEl","addMoreWrapper","addMoreButton","$3ad807910716e42a$var$page","$3ad807910716e42a$var$onFormSubmit","$parcel$interopDefault","$2TvXO","mark","_callee","e","data","preventDefault","currentTarget","elements","searchQuery","value","innerHTML","classList","add","$b7ONl","default","query","page","_ctx","sent","hits","length","$ejkSG","Notify","failure","success","concat","total","$3ad807910716e42a$var$showButton","$fJh0j","reset","t0","message","$3ad807910716e42a$var$onAddMoreClick","Math","ceil","$3ad807910716e42a$var$hideButton","info","$3ad807910716e42a$var$smoothScroll","remove","addEventListener","removeEventListener","contains","scrollIntoView","behavior"],"version":3,"file":"addMore.c4d4d3d4.js.map"}